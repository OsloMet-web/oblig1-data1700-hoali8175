<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OBLIG 2</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

</head>
<body>

<h1>Bestilling av kinobiletter-OBLIG2</h1>

<!-- Skjema for kinobillettbestilling -->
<form id="billettForm">
  <table>
    <!-- Filmnavn -->
    <tr>
      <td><label for="filmNavn">Filmnavn:</label></td>
      <td>
        <select class="form-control" id="filmNavn">
          <option value="" selected disabled>Velg film her</option>
          <option>Indiana Jones and the Dial of Destiny</option>
          <option>Avengers Infinity War</option>
          <option>Spiderman Far From Home</option>
        </select>
        <span id="filmNavnError" class="error-message"></span>
      </td>
    </tr>
    <!-- Antall billetter -->
    <tr>
      <td><label for="antallBilletter">Antall billetter:</label></td>
      <td>
        <input type="number" id="antallBilletter" min="1" max="9">
        <span id="antallBilletterError" class="error-message"></span>
      </td>
    </tr>
    <!-- Fornavn -->
    <tr>
      <td><label for="kundeNavn">Fornavn:</label></td>
      <td>
        <input class="form-control" type="text" id="kundeNavn">
        <span id="kundeNavnError" class="error-message"></span>
      </td>
    </tr>
    <!-- Etternavn -->
    <tr>
      <td><label for="kundeEtternavn">Etternavn:</label></td>
      <td>
        <input class="form-control" type="text" id="kundeEtternavn">
        <span id="kundeEtternavnError" class="error-message"></span>
      </td>
    </tr>
    <!-- Telefonnummer -->
    <tr>
      <td><label for="kundeNummer">Telefonnummer:</label></td>
      <td>
        <input class="form-control" type="text" id="kundeNummer">
        <span id="kundeNummerError" class="error-message"></span>
      </td>
    </tr>
    <!-- E-postadresse -->
    <tr>
      <td><label for="kundeEmail">E-postadresse:</label></td>
      <td>
        <input class="form-control" type="text" id="kundeEmail">
        <span id="kundeEmailError" class="error-message"></span>
      </td>
    </tr>
  </table>
  <!-- Knapp for å sende inn skjemaet -->
  <button class="btn btn-primary" type="submit">Kjøp billett</button>
</form>

<!-- Overskrift for alle billetter -->
<h2>Alle billetter:</h2>
<!-- Liste for å vise alle billetter -->
<ul id="billettListe"></ul>

<!-- Knapp for å slette alle billetter -->
<button class="btn btn-danger" id="slettBilletter">Slett alle billettene</button>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  $(document).ready(function() {
    const billettForm = $('#billettForm');
    const billettListe = $('#billettListe');
    const sletteKnapp = $('#slettBilletter');

    // Lytter etter innlevering av skjemaet for kinobillettbestilling
    billettForm.submit(function(event) {
      event.preventDefault();

      // Henter verdier fra input feltene
      const filmNavn = $('#filmNavn').val().trim();
      const antallBilletter = $('#antallBilletter').val().trim();
      const kundeNavn = $('#kundeNavn').val().trim();
      const kundeEtternavn = $('#kundeEtternavn').val().trim();
      const kundeNummer = $('#kundeNummer').val().trim();
      const kundeEmail = $('#kundeEmail').val().trim();

      // Gjør AJAX POST-forespørsel for å sende data til Spring Controller
      $.post('billetter/lagreBillett', {
        filmNavn: filmNavn,
        antallBilletter: antallBilletter,
        kundeNavn: kundeNavn,
        kundeEtternavn: kundeEtternavn,
        kundeNummer: kundeNummer,
        kundeEmail: kundeEmail
      }).done(function(response) {
        // Viser svaret fra serveren
        console.log(response);
        // Du kan legge til annen oppdatering av grensesnittet her hvis nødvendig
      }).fail(function(error) {
        // Håndter feil
        console.error(error);
      });
    });

    // Gjør AJAX GET-forespørsel for å hente data fra Spring Controller
    $.get('billetter/hentBilletter', function(billetter) {
      // Viser billetter som er hentet fra serveren
      console.log(billetter);
      // Du kan legge til logikk for å vise billetter på grensesnittet her hvis nødvendig
    });

    // Gjør AJAX DELETE-forespørsel når sletteknappen trykkes
    sletteKnapp.click(function() {
      $.ajax({
        url: '/slettBilletter',
        type: 'DELETE',
        success: function(response) {
          // Håndter suksessrespons fra serveren
          console.log(response);
          // Du kan legge til annen oppdatering av grensesnittet her hvis nødvendig
        },
        error: function(error) {
          // Håndter feil
          console.error(error);
        }
      });
    });
  });
</script>
</body>
</html>
